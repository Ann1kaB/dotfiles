#!/bin/bash

IFS=$'\n'

ACTIVE=$(xrandr --listmonitors | awk '{print $4}' | xargs)

ACTIVE1=$(echo $ACTIVE | awk '{print $1}')
ACTIVE2=$(echo $ACTIVE | awk '{print $2}')

OUTPUTS=$(xrandr | awk '{print $1,$2}' | sed 's/.*x.*//;s/Screen//;s/[0-9]://;/^\s*$/d' | egrep -o "^\S*")

OUT1=$(echo $OUTPUTS | xargs | awk '{print $1}')
OUT2=$(echo $OUTPUTS | xargs | awk '{print $2}')

POSITION=$(xrandr --listmonitors | awk '{print $3}' | grep -o "+.*+")

POS1=$(echo $POSITION | awk '{print $1}')
POS2=$(echo $POSITION | awk '{print $2}')

case "$ACTIVE1 $ACTIVE2 $POS1 $POS2" in
	"$OUT1 $OUT2 +0+ +0+")
	xrandr --output $OUT1 --auto --output $OUT2 --auto --left-of $OUT1
        xsetroot -name "DISPLAY: EXTEND LEFT"
	;;
	"$OUT1 $OUT2 +1920+ +0+")
	xrandr --output $OUT1 --auto --output $OUT2 --auto --right-of $OUT1
        xsetroot -name "DISPLAY: EXTEND RIGHT"
	;;
	"$OUT1 $OUT2 +0+ +1920+")
	xrandr --output $OUT1 --off --output $OUT2 --auto
	xsetroot -name "DISPLAY: 1:OFF 2:ON"
	;;
	"$OUT2  +0+ ")
        xrandr --output $OUT1 --auto --output $OUT2 --off
        xsetroot -name "DISPLAY: 1:ON 2:OFF"
	;;
	*)
	xrandr --auto
	xsetroot -name "DISPLAY: MIRROR"
	;;
esac
